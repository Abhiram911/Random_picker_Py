<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ðŸŽ„ Cognizant Ã— Comerica Christmas Celebration ðŸŽ…</title>

  <style>
    :root{
      --bg1: #0b122e;
      --bg2: #18234e;
      --accent: #e63946;
      --gold: #ffd166;
      --mint: #06d6a0;
      --white: #ffffff;
      --shadow: rgba(0,0,0,0.35);
      --card-bg: rgba(255,255,255,0.88);
    }

    * { box-sizing: border-box }
    html, body { height: 100%; }
    body {
      margin: 0;
      overflow: hidden;
      font-family: 'Poppins', sans-serif;
      color: var(--white);
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
    }

    /* Parallax */
    .scene { position: fixed; inset: 0; perspective: 1000px; }
    .layer { position: absolute; inset: 0; background-size: cover; background-position: center; }

    /* Stars */
    .stars::before, .stars::after {
      content: ""; position: absolute; inset: 0;
      background-image:
        radial-gradient(2px 2px at 20% 30%, #fff8, transparent 50%),
        radial-gradient(1.5px 1.5px at 70% 20%, #fff6, transparent 50%),
        radial-gradient(1px 1px at 40% 80%, #fff6, transparent 50%),
        radial-gradient(1.8px 1.8px at 85% 60%, #fff8, transparent 50%),
        radial-gradient(1.2px 1.2px at 15% 75%, #fff8, transparent 50%);
      animation: twinkle 6s linear infinite;
    }
    @keyframes twinkle { 0%,100%{ opacity:0.7 } 50%{ opacity:1 } }

    /* Mountains */
    .mountains {
      background:
        radial-gradient(1000px 300px at 50% 80%, #0f1a3f 20%, transparent 60%),
        radial-gradient(800px 260px at 20% 85%, #0d1736 20%, transparent 60%),
        radial-gradient(900px 280px at 80% 85%, #0d1736 20%, transparent 60%);
      transform: translateZ(-200px) scale(1.2);
      opacity: 0.7;
    }

    /* Snow ground */
    .snow-ground {
      background:
        linear-gradient(to top, rgba(255,255,255,0.25), transparent 50%),
        radial-gradient(1200px 300px at 50% 120%, #fff 45%, transparent 60%);
    }

    /* Garland */
    .garland { position: absolute; top: 0; width: 100%; height: 120px; }
    .bulbs { position: absolute; top: 40px; width: 100%; display: flex; justify-content: space-around; gap: 28px; }
    .bulb { width: 18px; height: 28px; border-radius: 50%; animation: glow 1.8s infinite; }
    .bulb:nth-child(odd){ background: var(--mint) }
    .bulb:nth-child(3n){ background: var(--accent) }
    .bulb:nth-child(2n){ background: var(--gold) }
    @keyframes glow { 50% { box-shadow: 0 0 18px 6px currentColor } }

    /* Santa */
    .santa {
      position: absolute;
      top: 10%;
      left: -25%;
      width: 260px;
      animation: flySanta 18s ease-in-out infinite, santaFloat 3.5s ease-in-out infinite;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,0.4));
    }

    @keyframes flySanta {
      0% { transform: translateX(0) translateY(0) scale(1) rotate(-2deg); opacity: 0; }
      10% { opacity: 1; }
      30% { transform: translateX(40vw) translateY(-6vh) scale(1.05) rotate(2deg); }
      55% { transform: translateX(85vw) translateY(2vh) scale(0.98) rotate(-1deg); }
      80% { transform: translateX(120vw) translateY(-3vh) scale(1.03) rotate(1deg); }
      100% { transform: translateX(150vw) translateY(0) scale(1); opacity: 0; }
    }

    @keyframes santaFloat {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }

    /* Snow Canvas */
    #snow { position: fixed; inset: 0; pointer-events: none; }

    /* Card */
    .container { position: relative; z-index: 10; min-height: 100vh; display: grid; place-items: center; padding: 24px; }

    .card {
      width: 100%; max-width: 440px;
      background: var(--card-bg);
      color: #291313;
      border-radius: 20px;
      box-shadow: 0 12px 40px var(--shadow);
      backdrop-filter: blur(12px);
      animation: fadeIn 0.8s ease-out;
    }

    .card-header {
      padding: 28px 28px 12px;
      display: flex; align-items: center; gap: 14px;
      border-bottom: 1px dashed rgba(0,0,0,0.12);
    }

    .title {
      font-family: 'Snowburst One', cursive;
      font-size: 28px;
      text-align: center;
      width: 100%;
      color: #b30000;
      text-shadow: 0 0 6px rgba(255,215,0,0.65);
    }

    .card-body { padding: 22px 28px 24px; }

    label { font-weight: 600; color: #5a0000; margin-bottom: 6px; }

    .input {
      width: 100%; padding: 14px;
      border: 2px solid #b30000; border-radius: 10px;
      background: rgba(255,255,255,0.95);
      transition: 0.25s;
    }

    .input:focus {
      border-color: #ff4d4d;
      box-shadow: 0 0 10px rgba(255,0,0,0.35);
      transform: scale(1.02);
    }

    .btn {
      margin-top: 18px; padding: 14px; width: 100%;
      background: linear-gradient(135deg, #b30000, #ff1a1a);
      color: #fff; border: none; border-radius: 10px;
      font-size: 16.5px; font-weight: 700;
      cursor: pointer; transition: 0.25s;
      box-shadow: 0 6px 15px rgba(179,0,0,0.4);
    }

    .btn:hover {
      background: linear-gradient(135deg, #ff1a1a, #b30000);
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(179,0,0,0.5);
    }

    .msg, .result {
      margin-top: 18px; padding: 12px;
      border-radius: 10px; font-weight: 600;
      animation: fadeIn 0.5s ease-out;
    }

    .msg { background: #ffebee; color: #b71c1c; border-left: 5px solid #b71c1c; }
    .result { background: #e8f5e9; color: #1b5e20; border-left: 5px solid #1b5e20; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px) } to { opacity: 1; transform: translateY(0) } }
  </style>
</head>

<body>

  <!-- Parallax Scene -->
  <div class="scene">
    <div class="layer stars"></div>
    <div class="layer mountains"></div>
    <div class="layer snow-ground"></div>

    <!-- Garland -->
    <div class="garland">
      <div class="bulbs">
        <!-- 30 bulbs -->
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
        <span class="bulb"></span><span class="bulb"></span><span class="bulb"></span>
      </div>
    </div>

    <!-- Santa -->
    <svg class="santa" viewBox="0 0 300 160">
      <path d="M60 110 C80 100, 140 100, 160 110 L180 120 C200 130, 240 130, 260 120"
            fill="none" stroke="#b3252b" stroke-width="8" stroke-linecap="round" />
      <rect x="120" y="70" width="70" height="40" rx="8" fill="#b3252b" />
      <circle cx="185" cy="85" r="6" fill="#ffd166"></circle>

      <g fill="#8b5e3c">
        <ellipse cx="40" cy="90" rx="22" ry="12"></ellipse>
        <rect x="58" y="85" width="10" height="6" rx="2"></rect>
        <path d="M25 70 Q35 65, 40 70 Q45 65, 55 70" stroke="#cfa16e" stroke-width="3" fill="none" />

        <ellipse cx="0" cy="80" rx="22" ry="12"></ellipse>
        <rect x="18" y="75" width="10" height="6" rx="2"></rect>
        <path d="M-15 60 Q-5 55, 0 60 Q5 55, 15 60" stroke="#cfa16e" stroke-width="3" fill="none" />
      </g>

      <path d="M120 90 C90 95, 50 94, 20 92" stroke="#ffd166" stroke-width="3" fill="none" stroke-linecap="round"/>
    </svg>
  </div>

  <!-- Snow Canvas -->
  <canvas id="snow"></canvas>

  <!-- Card -->
  <div class="container">
    <div class="card">
      <div class="card-header">
        <h1 id="title" class="title">ðŸŽ„ Cognizant - Comerica Christmas Celebration ðŸŽ…</h1>
      </div>

      <div class="card-body">
        <form method="POST">
          <label for="username">Enter your Emp Id</label>
          <input id="username" class="input" type="text" name="username" placeholder="Emp Id" required />
          <button class="btn" type="submit">Find my Santa ðŸŽ…</button>
        </form>

        {% if message %}
        <div class="msg">{{ message }}</div>
        {% endif %}

        {% if result %}
        <div class="result">{{ result }}</div>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Parallax
    (function(){
      const layers = document.querySelectorAll('.layer');
      const factor = [0.02, 0.04, 0.06];
      window.addEventListener('mousemove', (e) => {
        const x = (e.clientX / window.innerWidth) - 0.5;
        const y = (e.clientY / window.innerHeight) - 0.5;
        layers.forEach((layer, i) => {
          const depth = factor[i] || 0.02;
          layer.style.transform = `translate3d(${x * depth * -60}px, ${y * depth * -40}px, 0)`;
        });
      });
    })();

    // Snowfall
    (function(){
      const canvas = document.getElementById('snow');
      const ctx = canvas.getContext('2d');
      let w, h, flakes;

      function resize(){
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        flakes = Array.from({length: Math.floor(w*h/8000)+120}, () => ({
          x: Math.random()*w,
          y: Math.random()*h,
          r: Math.random()*2.4 + 0.6,
          a: Math.random()*Math.PI*2,
          v: Math.random()*0.7 + 0.3
        }));
      }

      function draw(){
        ctx.clearRect(0,0,w,h);
        ctx.fillStyle = 'rgba(255,255,255,0.9)';
        for(const f of flakes){
          f.a += 0.01;
          f.y += f.v;
          f.x += Math.cos(f.a) * 0.35;
          if(f.y > h + 5){ f.y = -5; f.x = Math.random()*w; }
          ctx.beginPath();
          ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
          ctx.fill();
        }
        requestAnimationFrame(draw);
      }

      window.addEventListener('resize', resize);
      resize(); 
      draw();
    })();

    // Audio toggle (optional)
    (function(){
      const audio = document.getElementById('bgm');
      const btn = document.getElementById('audioToggle');
      const label = document.getElementById('audioLabel');

      if(btn){
        btn.addEventListener('click', () => {
          audio.muted = !audio.muted;
          label.textContent = audio.muted ? 'Unmute' : 'Mute';
          btn.setAttribute('aria-pressed', audio.muted ? 'true' : 'false');

          if(!audio.paused && audio.muted){
            audio.pause();
          } else {
            audio.play().catch(() => {});
          }
        });
      }
    })();
  </script>

</body>
</html>
